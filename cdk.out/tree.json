{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"IdentityFnUserRegistrationStack":{"id":"IdentityFnUserRegistrationStack","path":"IdentityFnUserRegistrationStack","children":{"IdentityFnUserRegistrationQueue":{"id":"IdentityFnUserRegistrationQueue","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationQueue","children":{"Resource":{"id":"Resource","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationQueue/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"identity-fn-user-registration-queue","tags":[{"key":"Environment","value":"sandbox"},{"key":"Owner","value":"dev-team@pulsifi.me"},{"key":"Stack","value":"identity-fn-user-registration-sandbox-stack"}],"visibilityTimeout":300}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.186.0","metadata":[{"visibilityTimeout":"*","queueName":"*"}]}},"NotificationEmailQueue":{"id":"NotificationEmailQueue","path":"IdentityFnUserRegistrationStack/NotificationEmailQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueueBase","version":"2.186.0","metadata":[]}},"security-group-resources":{"id":"security-group-resources","path":"IdentityFnUserRegistrationStack/security-group-resources","children":{"security-group-resources-security-group":{"id":"security-group-resources-security-group","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group","children":{"VPC":{"id":"VPC","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/VPC","children":{"PublicSubnet1":{"id":"PublicSubnet1","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/VPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/VPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"PublicSubnet3":{"id":"PublicSubnet3","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/VPC/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/VPC/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/VPC/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"PrivateSubnet3":{"id":"PrivateSubnet3","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/VPC/PrivateSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"SecurityGroup":{"id":"SecurityGroup","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/SecurityGroup","children":{"Resource":{"id":"Resource","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"identity-fn-sg","groupName":"identity-fn-sg","tags":[{"key":"Environment","value":"sandbox"},{"key":"Name","value":"identity-fn-sg"},{"key":"Owner","value":"dev-team@pulsifi.me"},{"key":"Stack","value":"identity-fn-user-registration-sandbox-stack"}],"vpcId":"vpc-6749a900"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.186.0"}},"to 0.0.0.0_0:ALL TRAFFIC":{"id":"to 0.0.0.0_0:ALL TRAFFIC","path":"IdentityFnUserRegistrationStack/security-group-resources/security-group-resources-security-group/SecurityGroup/to 0.0.0.0_0:ALL TRAFFIC","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","groupId":{"Fn::GetAtt":["securitygroupresourcessecuritygroupresourcessecuritygroupSecurityGroupB5E06A1C","GroupId"]},"ipProtocol":"-1"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.186.0","metadata":[{"securityGroupName":"*","description":"*","vpc":"*","allowAllOutbound":true,"disableInlineRules":true}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"db-target-security-group":{"id":"db-target-security-group","path":"IdentityFnUserRegistrationStack/security-group-resources/db-target-security-group","children":{"from IdentityFnUserRegistrationStacksecuritygroupresourcessecuritygroupresourcessecuritygroupSecurityGroupBDB91FB7:5432":{"id":"from IdentityFnUserRegistrationStacksecuritygroupresourcessecuritygroupresourcessecuritygroupSecurityGroupBDB91FB7:5432","path":"IdentityFnUserRegistrationStack/security-group-resources/db-target-security-group/from IdentityFnUserRegistrationStacksecuritygroupresourcessecuritygroupresourcessecuritygroupSecurityGroupBDB91FB7:5432","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"identity-fn-sg","fromPort":5432,"groupId":"sg-0d3271a70576898d4","ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["securitygroupresourcessecuritygroupresourcessecuritygroupSecurityGroupB5E06A1C","GroupId"]},"toPort":5432}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":[]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DBSecret":{"id":"DBSecret","path":"IdentityFnUserRegistrationStack/DBSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":[]}},"SsmParameterValue:--configs--api--AWS_SQS_BASE_DNS:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--configs--api--AWS_SQS_BASE_DNS:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"IdentityFnUserRegistrationStack/SsmParameterValue:--configs--api--AWS_SQS_BASE_DNS:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.186.0"}},"SsmParameterValue:--configs--api--AWS_SQS_BASE_DNS:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--configs--api--AWS_SQS_BASE_DNS:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"IdentityFnUserRegistrationStack/SsmParameterValue:--configs--api--AWS_SQS_BASE_DNS:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":[]}},"IdentityFnUserRegistrationHandler":{"id":"IdentityFnUserRegistrationHandler","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler","children":{"ServiceRole":{"id":"ServiceRole","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.186.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}],"tags":[{"key":"Environment","value":"sandbox"},{"key":"Owner","value":"dev-team@pulsifi.me"},{"key":"Stack","value":"identity-fn-user-registration-sandbox-stack"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.186.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["IdentityFnUserRegistrationQueueAAB73A3E","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue","secretsmanager:PutSecretValue","secretsmanager:UpdateSecret"],"Effect":"Allow","Resource":"arn:aws:secretsmanager:ap-southeast-1:434343955077:secret:identity-postgresql-credential-??????"},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":"arn:aws:sqs:ap-southeast-1:434343955077:notification-email-request-queue"}],"Version":"2012-10-17"},"policyName":"IdentityFnUserRegistrationHandlerServiceRoleDefaultPolicy03BCF6A1","roles":[{"Ref":"IdentityFnUserRegistrationHandlerServiceRole6904CFF3"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.186.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.186.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"},{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/Code","children":{"Stage":{"id":"Stage","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.186.0"}},"AssetBucket":{"id":"AssetBucket","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.186.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.186.0"}},"Resource":{"id":"Resource","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-434343955077-ap-southeast-1","s3Key":"0fb8734a7039d7a53e146564efd0932c024bb785572e08a48d6e1ddb5ed17ffe.zip"},"environment":{"variables":{"QUEUE_URL":{"Ref":"IdentityFnUserRegistrationQueueAAB73A3E"},"SM_NAME":"identity-postgresql-credential","REGION":"ap-southeast-1","NOTIFICATION_EMAIL_QUEUE":{"Ref":"SsmParameterValueconfigsapiAWSSQSBASEDNSC96584B6F00A464EAD1953AFF4B05118Parameter"},"SENTRY_DSN":"https://b79130468ac5a32c12a79256a7812582@o157451.ingest.us.sentry.io/4508103154728960","SERVERLESS_STAGE":"development","AUTH0_DOMAIN":"https://sandbox-id.pulsifi.me/","AUTH0_API_AUDIENCE":"https://sandbox.api.pulsifi.me/","AUTH0_MANAGEMENT_AUDIENCE":"https://sandbox.api.pulsifi.me/","AUTH0_M2M_CLIENT_ID":"uydKnETZG8ZDDNbce7NqGZiObZPqySo0","AUTH0_M2M_CLIENT_SECRET":"IX6JVgrWRyy9X8KxC6fXbGbpZwAs8bflOG41a4qeIYhtfnnPBQ6j4KlZcQDo0MyB","AUTH0_ENTERPRISE_DOMAIN":"https://sandbox-enterprise-id.pulsifi.me/","AUTH0_ENTERPRISE_API_AUDIENCE":"https://sandbox.api.pulsifi.me/","AUTH0_ENTERPRISE_MANAGEMENT_AUDIENCE":"https://pulsifi-sandbox-enterprise.us.auth0.com/api/v2/","AUTH0_ENTERPRISE_M2M_CLIENT_ID":"uydKnETZG8ZDDNbce7NqGZiObZPqySo0","AUTH0_ENTERPRISE_M2M_CLIENT_SECRET":"IX6JVgrWRyy9X8KxC6fXbGbpZwAs8bflOG41a4qeIYhtfnnPBQ6j4KlZcQDo0MyB"}},"functionName":"identity-fn-user-registration","handler":"index.handler","memorySize":128,"role":{"Fn::GetAtt":["IdentityFnUserRegistrationHandlerServiceRole6904CFF3","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"Environment","value":"sandbox"},{"key":"Owner","value":"dev-team@pulsifi.me"},{"key":"Stack","value":"identity-fn-user-registration-sandbox-stack"}],"timeout":30,"vpcConfig":{"subnetIds":["subnet-4d258304","subnet-9357e7f4","subnet-08bf9accd9777434c"],"securityGroupIds":[{"Fn::GetAtt":["securitygroupresourcessecuritygroupresourcessecuritygroupSecurityGroupB5E06A1C","GroupId"]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.186.0"}},"SqsEventSource:IdentityFnUserRegistrationStackIdentityFnUserRegistrationQueueC3B80897":{"id":"SqsEventSource:IdentityFnUserRegistrationStackIdentityFnUserRegistrationQueueC3B80897","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/SqsEventSource:IdentityFnUserRegistrationStackIdentityFnUserRegistrationQueueC3B80897","children":{"Resource":{"id":"Resource","path":"IdentityFnUserRegistrationStack/IdentityFnUserRegistrationHandler/SqsEventSource:IdentityFnUserRegistrationStackIdentityFnUserRegistrationQueueC3B80897/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"sandbox"},{"key":"Owner","value":"dev-team@pulsifi.me"},{"key":"Stack","value":"identity-fn-user-registration-sandbox-stack"}],"eventSourceArn":{"Fn::GetAtt":["IdentityFnUserRegistrationQueueAAB73A3E","Arn"]},"functionName":{"Ref":"IdentityFnUserRegistrationHandler8C99D874"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.186.0","metadata":[{"target":"*","batchSize":"*","maxBatchingWindow":"*","maxConcurrency":"*","reportBatchItemFailures":"*","enabled":"*","eventSourceArn":"*","filters":"*","filterEncryption":"*","metricsConfig":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.186.0","metadata":[{"runtime":"*","entry":"*","handler":"*","timeout":"*","memorySize":"*","functionName":"*","vpc":"*","securityGroups":["*"],"environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","externalModules":"*","define":"*"},"code":"*"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{"runtime":"*","entry":"*","handler":"*","timeout":"*","memorySize":"*","functionName":"*","vpc":"*","securityGroups":["*"],"environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","externalModules":"*","define":"*"}}]}},"CDKMetadata":{"id":"CDKMetadata","path":"IdentityFnUserRegistrationStack/CDKMetadata","children":{"Default":{"id":"Default","path":"IdentityFnUserRegistrationStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.186.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"IdentityFnUserRegistrationStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.186.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"IdentityFnUserRegistrationStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.186.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.186.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.186.0"}}}